<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cursos y Simposios HRAEI 2026</title>
    <link rel="stylesheet" href="css/styles1.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="portada">
      <header class="header">
        <div class="logo">
          <img src="assets/imagenes/logo_HRAEI.png" alt="Hospital Regional" />
        </div>
      </header>

      <section class="contenido">
        <h1>
          Cursos y Simposios<br />
          <span>HRAEI 2026</span>
        </h1>
      </section>

      <div class="login-container">
        <div class="login-avatar">
          <div class="avatar-image"></div>
          <img src="assets/iconos/nombre.svg" alt="iconos" />
        </div>
        <input type="text" id="usuario" class="login-input" placeholder="Correo electronico" />
        <input type="password" id="contrasena" class="login-input" placeholder="Contraseña" />
        <a href="" class="login-link forgot">Olvidé mi contraseña</a>
        <button onclick="validarLogin()" class="login-button">Iniciar Sesión</button>
        <a href="crear_cuenta.html" class="login-link">Crear cuenta</a>
      </div>
    </div>

    <script>
      async function validarLogin() {
        const usuario = document.getElementById("usuario").value.trim();
        const contrasena = document.getElementById("contrasena").value.trim();

        // Validaciones visuales previas (igual que antes)
        if (usuario === "") {
          alert("Por favor, ingresa tu correo electrónico y contraseña");
          return;
        }

        if (contrasena === "") {
          alert("Por favor, ingresa tu contraseña");
          return;
        }

        // Nueva lógica de conexión a la Base de Datos
        try {
            // Enviamos los datos al archivo PHP
            const response = await fetch('login.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    usuario: usuario,
                    contrasena: contrasena
                })
            });

            // Esperamos la respuestax
            const data = await response.json();

            if (data.success) {
                // Si el PHP dice que es correcto, redirigimos
                window.location.href = "Inicio.php";
            } else {
                // Si la contraseña o usuario están mal, mostramos el error del PHP
                alert(data.message || "Error al iniciar sesión");
            }
        } catch (error) {
            console.error("Error:", error);
            alert("Hubo un error al conectar con el servidor.");
        }
      }
    </script>
  </body>
</html>